<% if (title) { %>
  <h1><%= title %></h1>
<% } else { %>
  <h1>Sent Messages</h1>
<% } %>

<%- messages() %>

<div class="message-navigation">
  <a href="/messages/inbox">ğŸ“¥ Back to Inbox</a>
  <a href="/messages/compose" class="btn btn-primary">âœ‰ï¸ Compose New Message</a>
  <a href="/messages/archived">ğŸ“ Archived Messages</a>
  <a href="/account/">â† Back to Account</a>
</div>

<div class="message-list">
  <% if (messageList && messageList.length > 0) { %>
    <table class="message-table">
      <thead>
        <tr>
          <th>To</th>
          <th>Subject</th>
          <th>Date</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% messageList.forEach(message => { %>
          <tr class="<%= message.message_read ? 'read' : 'unread' %>">
            <td><%= message.recipient_name %></td>
            <td>
              <a href="/messages/read/<%= message.message_id %>">
                <%= message.message_subject %>
              </a>
            </td>
            <td><%= new Date(message.message_created).toLocaleString() %></td>
            <td class="message-actions">
              <a href="/messages/read/<%= message.message_id %>" class="btn btn-sm">View</a>
              <form action="/messages/delete/<%= message.message_id %>" method="post" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this message?');">
                <button type="submit" class="btn btn-sm btn-danger">ğŸ—‘ï¸ Delete</button>
              </form>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  <% } else { %>
    <div class="no-messages">
      <p>ğŸ“­ No sent messages.</p>
      <p><a href="/messages/compose" class="btn btn-primary">Send your first message!</a></p>
    </div>
  <% } %>
</div>